<div id="flooplan-app" class="is-loading">
  <main>
    <header>
      <p>Configure your floorplan</p>
      <a id="help_tip" href="#">Need help?</a>
    </header>
    <div class="loading-message">
      <!-- Show loading animation -->
      <div class="spinner-holder animated">
        <div class="spinner-overlay">Loading...</div>
        <p>Loading the floorplan... Please wait!</p>
      </div>
    </div>
    <section class="app-content">
      <form class="form-horizontal">
        <div class="form-group clearfix">
          <div class="col-sm-12 control-label">
            <label>Add your floorplans</label>
          </div>
          <div class="col-sm-12">
            <div class="floor-panels-holder">
              <div class="add-floor-panel" @click.prevent="onAddFloor"><i class="fa fa-plus-circle"></i> Add a new floorplan</div>
              <div class="panel-group" id="floor-accordion" v-sortable="{ handle: '.panel-heading', group: { name: 'floorPanels', pull: false }, scrollSensitivity: 116, scrollSpeed: 10, onUpdate: onSortFloors }">
                
                <div v-for="(floor, idx) in floors" v-bind:key="floor.id" class="panel panel-default floor-panel" :data-id="floor.id">
                  <div class="panel-heading">
                    <h4 class="panel-title" v-bind:class="{ 'collapsed': !floor.isFromNew }" data-toggle="collapse" data-parent="#floor-accordion" :data-target="'#collapse-' + floor.id">
                      <div class="screen-reorder-handle">
                        <i class="fa fa-ellipsis-v"></i><i class="fa fa-ellipsis-v"></i>
                      </div>
                      <span class="panel-title-text">\{{floor.name}}</span>
                      <span class="fa panel-chevron fa-chevron-up"></span>
                    </h4>
                    <a href="#" v-on:click.prevent.stop="deleteFloor(idx)"><span class="icon-delete fa fa-trash"></span></a>
                  </div>
                  <div :id="'collapse-' + floor.id" class="panel-collapse collapse" v-bind:class="{ in: floor.isFromNew }">
                    <div class="panel-body">

                      <component :is="floor.type" v-bind="floor"></component>

                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>

        <div class="form-group clearfix">
          <div class="col-sm-12 control-label">
            <label>Configure your floor markers</label>
          </div>
          <div class="col-sm-12">
            <div class="floor-markers-holder">
              <div class="add-floor-marker" @click.prevent="onAddMarker"><i class="fa fa-plus-circle"></i> Add a new marker</div>
              <div class="panel-group" id="markers-accordion">
                
                <div v-for="(marker, idx) in markers" v-bind:key="marker.id" class="panel panel-default marker-panel" :data-id="marker.id">
                  <div class="panel-heading">
                    <h4 class="panel-title" v-bind:class="{ 'collapsed': !marker.isFromNew }" data-toggle="collapse" data-parent="#markers-accordion" :data-target="'#collapse-' + marker.id">
                      <span class="panel-title-text">\{{marker.name}}</span>
                      <span class="fa panel-chevron fa-chevron-up"></span>
                    </h4>
                    <a href="#" v-on:click.prevent.stop="deleteMarker(idx)"><span class="icon-delete fa fa-trash"></span></a>
                  </div>
                  <div :id="'collapse-' + marker.id" class="panel-collapse collapse" v-bind:class="{ in: marker.isFromNew }">
                    <div class="panel-body">

                      <component :is="marker.type" v-bind="marker"></component>

                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>
      </form>
    </section>
  </main>
</div>